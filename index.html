<!DOCTYPE html>
<html manifest="baka.manifest">
<head>

    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
   <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon" href="images/baka-icon-small.png"/>

    <link rel="apple-touch-startup-image" href="images/splash-screen.png" />
    
    <script src="./js/libs/modernizr-custom.js"></script>

    <title>Aruku: Japanese-English Translation</title>
</head>
<body>
<div class="input">
<input size="47" type="search" id="stringtotranslate" placeholder="English or Japanese here" />
</div>
<div id="search-results">

</div>
<div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="./js/jquery.blockUI.js"></script>
<script src="./js/jquery.cors.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('#stringtotranslate').keypress(function(event){
			var keycode = (event.keyCode ? event.keyCode : event.which);
			if(keycode == '13'){
				document.activeElement.blur();
				$.blockUI({ css: { 
				            border: 'none', 
				            //padding: '15px', 
				            backgroundColor: '#000', 
				            '-webkit-border-radius': '20px', 
				            '-moz-border-radius': '10px', 
				            opacity: .5, 
				            color: '#fff' 
				        } });
				        
				//$.getJSON("http://viewtext.org/api/text?url=http://eow.alc.co.jp/" + encodeURI($("#stringtotranslate").val())+"/UTF-8/" + "&callback=?",
				$.getJSON("./server.php?string_to_translate=" + encodeURI($("#stringtotranslate").val()),
				    function (data) {
					    var content = $(data.content);
					    var resultsList = content.find("#resultsList");
					    console.log("done."+resultsList.html());
					    $("#search-results").html(resultsList.html());
					    $.unblockUI();
				});	
			}
		 
		});
	});
</script>
</body>
</html>
